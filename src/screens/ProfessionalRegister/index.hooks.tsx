import { useNavigation } from "@react-navigation/native";
import { yupResolver } from "@hookform/resolvers/yup";
import * as yup from "yup";
import { useForm, useWatch } from "react-hook-form";
import React, { useCallback, useLayoutEffect, useMemo } from "react";
import { useDispatch, useSelector } from "react-redux";
import { actions, selectors } from "@app/redux-store";
import { HeaderStepperCounter } from "@app/components/HeaderStepperCounter";

const phonePrefixOptions = [
  {
    label: "ğŸ‡¦ğŸ‡« Afghanistan (+93)",
    value: "+93",
  },
  {
    label: "ğŸ‡¦ğŸ‡½ Ã…land Islands (+358)",
    value: "+358",
  },
  {
    label: "ğŸ‡¦ğŸ‡± Albania (+355)",
    value: "+355",
  },
  {
    label: "ğŸ‡©ğŸ‡¿ Algeria (+213)",
    value: "+213",
  },
  {
    label: "ğŸ‡¦ğŸ‡¸ American Samoa (+1684)",
    value: "+1684",
  },
  {
    label: "ğŸ‡¦ğŸ‡© Andorra (+376)",
    value: "+376",
  },
  {
    label: "ğŸ‡¦ğŸ‡´ Angola (+244)",
    value: "+244",
  },
  {
    label: "ğŸ‡¦ğŸ‡® Anguilla (+1264)",
    value: "+1264",
  },
  {
    label: "ğŸ‡¦ğŸ‡¶ Antarctica (+672)",
    value: "+672",
  },
  {
    label: "ğŸ‡¦ğŸ‡¬ Antigua and Barbuda (+1268)",
    value: "+1268",
  },
  {
    label: "ğŸ‡¦ğŸ‡· Argentina (+54)",
    value: "+54",
  },
  {
    label: "ğŸ‡¦ğŸ‡² Armenia (+374)",
    value: "+374",
  },
  {
    label: "ğŸ‡¦ğŸ‡¼ Aruba (+297)",
    value: "+297",
  },
  {
    label: "ğŸ‡¦ğŸ‡º Australia (+61)",
    value: "+61",
  },
  {
    label: "ğŸ‡¦ğŸ‡¹ Austria (+43)",
    value: "+43",
  },
  {
    label: "ğŸ‡¦ğŸ‡¿ Azerbaijan (+994)",
    value: "+994",
  },
  {
    label: "ğŸ‡§ğŸ‡¸ Bahamas (+1242)",
    value: "+1242",
  },
  {
    label: "ğŸ‡§ğŸ‡­ Bahrain (+973)",
    value: "+973",
  },
  {
    label: "ğŸ‡§ğŸ‡© Bangladesh (+880)",
    value: "+880",
  },
  {
    label: "ğŸ‡§ğŸ‡§ Barbados (+1246)",
    value: "+1246",
  },
  {
    label: "ğŸ‡§ğŸ‡¾ Belarus (+375)",
    value: "+375",
  },
  {
    label: "ğŸ‡§ğŸ‡ª Belgium (+32)",
    value: "+32",
  },
  {
    label: "ğŸ‡§ğŸ‡¿ Belize (+501)",
    value: "+501",
  },
  {
    label: "ğŸ‡§ğŸ‡¯ Benin (+229)",
    value: "+229",
  },
  {
    label: "ğŸ‡§ğŸ‡² Bermuda (+1441)",
    value: "+1441",
  },
  {
    label: "ğŸ‡§ğŸ‡¹ Bhutan (+975)",
    value: "+975",
  },
  {
    label: "ğŸ‡§ğŸ‡´ Bolivia (+591)",
    value: "+591",
  },
  {
    label: "ğŸ‡§ğŸ‡¦ Bosnia and Herzegovina (+387)",
    value: "+387",
  },
  {
    label: "ğŸ‡§ğŸ‡¼ Botswana (+267)",
    value: "+267",
  },
  {
    label: "ğŸ‡§ğŸ‡» Bouvet Island (+47)",
    value: "+47",
  },
  {
    label: "ğŸ‡§ğŸ‡· Brazil (+55)",
    value: "+55",
  },
  {
    label: "ğŸ‡®ğŸ‡´ British Indian Ocean Territory (+246)",
    value: "+246",
  },
  {
    label: "ğŸ‡§ğŸ‡³ Brunei Darussalam (+673)",
    value: "+673",
  },
  {
    label: "ğŸ‡§ğŸ‡¬ Bulgaria (+359)",
    value: "+359",
  },
  {
    label: "ğŸ‡§ğŸ‡« Burkina Faso (+226)",
    value: "+226",
  },
  {
    label: "ğŸ‡§ğŸ‡® Burundi (+257)",
    value: "+257",
  },
  {
    label: "ğŸ‡°ğŸ‡­ Cambodia (+855)",
    value: "+855",
  },
  {
    label: "ğŸ‡¨ğŸ‡² Cameroon (+237)",
    value: "+237",
  },
  {
    label: "ğŸ‡¨ğŸ‡¦ Canada (+1)",
    value: "+1",
  },
  {
    label: "ğŸ‡¨ğŸ‡» Cape Verde (+238)",
    value: "+238",
  },
  {
    label: "ğŸ‡°ğŸ‡¾ Cayman Islands (+345)",
    value: "+345",
  },
  {
    label: "ğŸ‡¨ğŸ‡« Central African Republic (+236)",
    value: "+236",
  },
  {
    label: "ğŸ‡¹ğŸ‡© Chad (+235)",
    value: "+235",
  },
  {
    label: "ğŸ‡¨ğŸ‡± Chile (+56)",
    value: "+56",
  },
  {
    label: "ğŸ‡¨ğŸ‡³ China (+86)",
    value: "+86",
  },
  {
    label: "ğŸ‡¨ğŸ‡½ Christmas Island (+61)",
    value: "+61",
  },
  {
    label: "ğŸ‡¨ğŸ‡¨ Cocos (Keeling) Islands (+61)",
    value: "+61",
  },
  {
    label: "ğŸ‡¨ğŸ‡´ Colombia (+57)",
    value: "+57",
  },
  {
    label: "ğŸ‡°ğŸ‡² Comoros (+269)",
    value: "+269",
  },
  {
    label: "ğŸ‡¨ğŸ‡¬ Congo (+242)",
    value: "+242",
  },
  {
    label: "ğŸ‡¨ğŸ‡© Democratic Republic of Congo (+243)",
    value: "+243",
  },
  {
    label: "ğŸ‡¨ğŸ‡° Cook Islands (+682)",
    value: "+682",
  },
  {
    label: "ğŸ‡¨ğŸ‡· Costa Rica (+506)",
    value: "+506",
  },
  {
    label: "ğŸ‡¨ğŸ‡® Cote d'Ivoire (+225)",
    value: "+225",
  },
  {
    label: "ğŸ‡­ğŸ‡· Croatia (+385)",
    value: "+385",
  },
  {
    label: "ğŸ‡¨ğŸ‡º Cuba (+53)",
    value: "+53",
  },
  {
    label: "ğŸ‡¨ğŸ‡¾ Cyprus (+357)",
    value: "+357",
  },
  {
    label: "ğŸ‡¨ğŸ‡¿ Czech Republic (+420)",
    value: "+420",
  },
  {
    label: "ğŸ‡©ğŸ‡° Denmark (+45)",
    value: "+45",
  },
  {
    label: "ğŸ‡©ğŸ‡¯ Djibouti (+253)",
    value: "+253",
  },
  {
    label: "ğŸ‡©ğŸ‡² Dominica (+1767)",
    value: "+1767",
  },
  {
    label: "ğŸ‡©ğŸ‡´ Dominican Republic (+1849)",
    value: "+1849",
  },
  {
    label: "ğŸ‡ªğŸ‡¨ Ecuador (+593)",
    value: "+593",
  },
  {
    label: "ğŸ‡ªğŸ‡¬ Egypt (+20)",
    value: "+20",
  },
  {
    label: "ğŸ‡¸ğŸ‡» El Salvador (+503)",
    value: "+503",
  },
  {
    label: "ğŸ‡¬ğŸ‡¶ Equatorial Guinea (+240)",
    value: "+240",
  },
  {
    label: "ğŸ‡ªğŸ‡· Eritrea (+291)",
    value: "+291",
  },
  {
    label: "ğŸ‡ªğŸ‡ª Estonia (+372)",
    value: "+372",
  },
  {
    label: "ğŸ‡ªğŸ‡¹ Ethiopia (+251)",
    value: "+251",
  },
  {
    label: "ğŸ‡«ğŸ‡° Falkland Islands (Malvinas) (+500)",
    value: "+500",
  },
  {
    label: "ğŸ‡«ğŸ‡´ Faroe Islands (+298)",
    value: "+298",
  },
  {
    label: "ğŸ‡«ğŸ‡¯ Fiji (+679)",
    value: "+679",
  },
  {
    label: "ğŸ‡«ğŸ‡® Finland (+358)",
    value: "+358",
  },
  {
    label: "ğŸ‡«ğŸ‡· France (+33)",
    value: "+33",
  },
  {
    label: "ğŸ‡¬ğŸ‡« French Guiana (+594)",
    value: "+594",
  },
  {
    label: "ğŸ‡µğŸ‡« French Polynesia (+689)",
    value: "+689",
  },
  {
    label: "ğŸ‡¹ğŸ‡« French Southern Territories (+262)",
    value: "+262",
  },
  {
    label: "ğŸ‡¬ğŸ‡¦ Gabon (+241)",
    value: "+241",
  },
  {
    label: "ğŸ‡¬ğŸ‡² Gambia (+220)",
    value: "+220",
  },
  {
    label: "ğŸ‡¬ğŸ‡ª Georgia (+995)",
    value: "+995",
  },
  {
    label: "ğŸ‡©ğŸ‡ª Germany (+49)",
    value: "+49",
  },
  {
    label: "ğŸ‡¬ğŸ‡­ Ghana (+233)",
    value: "+233",
  },
  {
    label: "ğŸ‡¬ğŸ‡® Gibraltar (+350)",
    value: "+350",
  },
  {
    label: "ğŸ‡¬ğŸ‡· Greece (+30)",
    value: "+30",
  },
  {
    label: "ğŸ‡¬ğŸ‡± Greenland (+299)",
    value: "+299",
  },
  {
    label: "ğŸ‡¬ğŸ‡© Grenada (+1473)",
    value: "+1473",
  },
  {
    label: "ğŸ‡¬ğŸ‡µ Guadeloupe (+590)",
    value: "+590",
  },
  {
    label: "ğŸ‡¬ğŸ‡º Guam (+1671)",
    value: "+1671",
  },
  {
    label: "ğŸ‡¬ğŸ‡¹ Guatemala (+502)",
    value: "+502",
  },
  {
    label: "ğŸ‡¬ğŸ‡¬ Guernsey (+44)",
    value: "+44",
  },
  {
    label: "ğŸ‡¬ğŸ‡³ Guinea (+224)",
    value: "+224",
  },
  {
    label: "ğŸ‡¬ğŸ‡¼ Guinea-Bissau (+245)",
    value: "+245",
  },
  {
    label: "ğŸ‡¬ğŸ‡¾ Guyana (+592)",
    value: "+592",
  },
  {
    label: "ğŸ‡­ğŸ‡¹ Haiti (+509)",
    value: "+509",
  },
  {
    label: "ğŸ‡­ğŸ‡² Heard Island / Mcdonald Islands (+672)",
    value: "+672",
  },
  {
    label: "ğŸ‡»ğŸ‡¦ Vatican City (+379)",
    value: "+379",
  },
  {
    label: "ğŸ‡­ğŸ‡³ Honduras (+504)",
    value: "+504",
  },
  {
    label: "ğŸ‡­ğŸ‡° Hong Kong (+852)",
    value: "+852",
  },
  {
    label: "ğŸ‡­ğŸ‡º Hungary (+36)",
    value: "+36",
  },
  {
    label: "ğŸ‡®ğŸ‡¸ Iceland (+354)",
    value: "+354",
  },
  {
    label: "ğŸ‡®ğŸ‡³ India (+91)",
    value: "+91",
  },
  {
    label: "ğŸ‡®ğŸ‡© Indonesia (+62)",
    value: "+62",
  },
  {
    label: "ğŸ‡®ğŸ‡· Iran (+98)",
    value: "+98",
  },
  {
    label: "ğŸ‡®ğŸ‡¶ Iraq (+964)",
    value: "+964",
  },
  {
    label: "ğŸ‡®ğŸ‡ª Ireland (+353)",
    value: "+353",
  },
  {
    label: "ğŸ‡®ğŸ‡² Isle of Man (+44)",
    value: "+44",
  },
  {
    label: "ğŸ‡®ğŸ‡± Israel (+972)",
    value: "+972",
  },
  {
    label: "ğŸ‡®ğŸ‡¹ Italy (+39)",
    value: "+39",
  },
  {
    label: "ğŸ‡¯ğŸ‡² Jamaica (+1876)",
    value: "+1876",
  },
  {
    label: "ğŸ‡¯ğŸ‡µ Japan (+81)",
    value: "+81",
  },
  {
    label: "ğŸ‡¯ğŸ‡ª Jersey (+44)",
    value: "+44",
  },
  {
    label: "ğŸ‡¯ğŸ‡´ Jordan (+962)",
    value: "+962",
  },
  {
    label: "ğŸ‡°ğŸ‡¿ Kazakhstan (+7)",
    value: "+7",
  },
  {
    label: "ğŸ‡°ğŸ‡ª Kenya (+254)",
    value: "+254",
  },
  {
    label: "ğŸ‡°ğŸ‡® Kiribati (+686)",
    value: "+686",
  },
  {
    label: "ğŸ‡°ğŸ‡µ Korea, North Korea (+850)",
    value: "+850",
  },
  {
    label: "ğŸ‡°ğŸ‡· Korea, South Korea (+82)",
    value: "+82",
  },
  {
    label: "ğŸ‡½ğŸ‡° Kosovo (+383)",
    value: "+383",
  },
  {
    label: "ğŸ‡°ğŸ‡¼ Kuwait (+965)",
    value: "+965",
  },
  {
    label: "ğŸ‡°ğŸ‡¬ Kyrgyzstan (+996)",
    value: "+996",
  },
  {
    label: "ğŸ‡±ğŸ‡¦ Laos (+856)",
    value: "+856",
  },
  {
    label: "ğŸ‡±ğŸ‡» Latvia (+371)",
    value: "+371",
  },
  {
    label: "ğŸ‡±ğŸ‡§ Lebanon (+961)",
    value: "+961",
  },
  {
    label: "ğŸ‡±ğŸ‡¸ Lesotho (+266)",
    value: "+266",
  },
  {
    label: "ğŸ‡±ğŸ‡· Liberia (+231)",
    value: "+231",
  },
  {
    label: "ğŸ‡±ğŸ‡¾ Libyan Arab Jamahiriya (+218)",
    value: "+218",
  },
  {
    label: "ğŸ‡±ğŸ‡® Liechtenstein (+423)",
    value: "+423",
  },
  {
    label: "ğŸ‡±ğŸ‡¹ Lithuania (+370)",
    value: "+370",
  },
  {
    label: "ğŸ‡±ğŸ‡º Luxembourg (+352)",
    value: "+352",
  },
  {
    label: "ğŸ‡²ğŸ‡´ Macao (+853)",
    value: "+853",
  },
  {
    label: "ğŸ‡²ğŸ‡° Macedonia (+389)",
    value: "+389",
  },
  {
    label: "ğŸ‡²ğŸ‡¬ Madagascar (+261)",
    value: "+261",
  },
  {
    label: "ğŸ‡²ğŸ‡¼ Malawi (+265)",
    value: "+265",
  },
  {
    label: "ğŸ‡²ğŸ‡¾ Malaysia (+60)",
    value: "+60",
  },
  {
    label: "ğŸ‡²ğŸ‡» Maldives (+960)",
    value: "+960",
  },
  {
    label: "ğŸ‡²ğŸ‡± Mali (+223)",
    value: "+223",
  },
  {
    label: "ğŸ‡²ğŸ‡¹ Malta (+356)",
    value: "+356",
  },
  {
    label: "ğŸ‡²ğŸ‡­ Marshall Islands (+692)",
    value: "+692",
  },
  {
    label: "ğŸ‡²ğŸ‡¶ Martinique (+596)",
    value: "+596",
  },
  {
    label: "ğŸ‡²ğŸ‡· Mauritania (+222)",
    value: "+222",
  },
  {
    label: "ğŸ‡²ğŸ‡º Mauritius (+230)",
    value: "+230",
  },
  {
    label: "ğŸ‡¾ğŸ‡¹ Mayotte (+262)",
    value: "+262",
  },
  {
    label: "ğŸ‡²ğŸ‡½ Mexico (+52)",
    value: "+52",
  },
  {
    label: "ğŸ‡«ğŸ‡² Micronesia (+691)",
    value: "+691",
  },
  {
    label: "ğŸ‡²ğŸ‡© Moldova (+373)",
    value: "+373",
  },
  {
    label: "ğŸ‡²ğŸ‡¨ Monaco (+377)",
    value: "+377",
  },
  {
    label: "ğŸ‡²ğŸ‡³ Mongolia (+976)",
    value: "+976",
  },
  {
    label: "ğŸ‡²ğŸ‡ª Montenegro (+382)",
    value: "+382",
  },
  {
    label: "ğŸ‡²ğŸ‡¸ Montserrat (+1664)",
    value: "+1664",
  },
  {
    label: "ğŸ‡²ğŸ‡¦ Morocco (+212)",
    value: "+212",
  },
  {
    label: "ğŸ‡²ğŸ‡¿ Mozambique (+258)",
    value: "+258",
  },
  {
    label: "ğŸ‡²ğŸ‡² Myanmar (+95)",
    value: "+95",
  },
  {
    label: "ğŸ‡³ğŸ‡¦ Namibia (+264)",
    value: "+264",
  },
  {
    label: "ğŸ‡³ğŸ‡· Nauru (+674)",
    value: "+674",
  },
  {
    label: "ğŸ‡³ğŸ‡µ Nepal (+977)",
    value: "+977",
  },
  {
    label: "ğŸ‡³ğŸ‡± Netherlands (+31)",
    value: "+31",
  },
  {
    label: "ğŸ‡§ğŸ‡¶ Netherlands Antilles (+599)",
    value: "+599",
  },
  {
    label: "ğŸ‡³ğŸ‡¨ New Caledonia (+687)",
    value: "+687",
  },
  {
    label: "ğŸ‡³ğŸ‡¿ New Zealand (+64)",
    value: "+64",
  },
  {
    label: "ğŸ‡³ğŸ‡® Nicaragua (+505)",
    value: "+505",
  },
  {
    label: "ğŸ‡³ğŸ‡ª Niger (+227)",
    value: "+227",
  },
  {
    label: "ğŸ‡³ğŸ‡¬ Nigeria (+234)",
    value: "+234",
  },
  {
    label: "ğŸ‡³ğŸ‡º Niue (+683)",
    value: "+683",
  },
  {
    label: "ğŸ‡³ğŸ‡« Norfolk Island (+672)",
    value: "+672",
  },
  {
    label: "ğŸ‡²ğŸ‡µ Northern Mariana Islands (+1670)",
    value: "+1670",
  },
  {
    label: "ğŸ‡³ğŸ‡´ Norway (+47)",
    value: "+47",
  },
  {
    label: "ğŸ‡´ğŸ‡² Oman (+968)",
    value: "+968",
  },
  {
    label: "ğŸ‡µğŸ‡° Pakistan (+92)",
    value: "+92",
  },
  {
    label: "ğŸ‡µğŸ‡¼ Palau (+680)",
    value: "+680",
  },
  {
    label: "ğŸ‡µğŸ‡¸ Palestine (+970)",
    value: "+970",
  },
  {
    label: "ğŸ‡µğŸ‡¦ Panama (+507)",
    value: "+507",
  },
  {
    label: "ğŸ‡µğŸ‡¬ Papua New Guinea (+675)",
    value: "+675",
  },
  {
    label: "ğŸ‡µğŸ‡¾ Paraguay (+595)",
    value: "+595",
  },
  {
    label: "ğŸ‡µğŸ‡ª Peru (+51)",
    value: "+51",
  },
  {
    label: "ğŸ‡µğŸ‡­ Philippines (+63)",
    value: "+63",
  },
  {
    label: "ğŸ‡µğŸ‡³ Pitcairn (+64)",
    value: "+64",
  },
  {
    label: "ğŸ‡µğŸ‡± Poland (+48)",
    value: "+48",
  },
  {
    label: "ğŸ‡µğŸ‡¹ Portugal (+351)",
    value: "+351",
  },
  {
    label: "ğŸ‡µğŸ‡· Puerto Rico (+1939)",
    value: "+1939",
  },
  {
    label: "ğŸ‡¶ğŸ‡¦ Qatar (+974)",
    value: "+974",
  },
  {
    label: "ğŸ‡·ğŸ‡´ Romania (+40)",
    value: "+40",
  },
  {
    label: "ğŸ‡·ğŸ‡º Russia (+7)",
    value: "+7",
  },
  {
    label: "ğŸ‡·ğŸ‡¼ Rwanda (+250)",
    value: "+250",
  },
  {
    label: "ğŸ‡·ğŸ‡ª Reunion (+262)",
    value: "+262",
  },
  {
    label: "ğŸ‡§ğŸ‡± Saint Barthelemy (+590)",
    value: "+590",
  },
  {
    label: "ğŸ‡¸ğŸ‡­ Saint Helena / Ascension / Tristan Da Cunha (+290)",
    value: "+290",
  },
  {
    label: "ğŸ‡°ğŸ‡³ Saint Kitts and Nevis (+1869)",
    value: "+1869",
  },
  {
    label: "ğŸ‡±ğŸ‡¨ Saint Lucia (+1758)",
    value: "+1758",
  },
  {
    label: "ğŸ‡²ğŸ‡« Saint Martin (+590)",
    value: "+590",
  },
  {
    label: "ğŸ‡µğŸ‡² Saint Pierre and Miquelon (+508)",
    value: "+508",
  },
  {
    label: "ğŸ‡»ğŸ‡¨ Saint Vincent and the Grenadines (+1784)",
    value: "+1784",
  },
  {
    label: "ğŸ‡¼ğŸ‡¸ Samoa (+685)",
    value: "+685",
  },
  {
    label: "ğŸ‡¸ğŸ‡² San Marino (+378)",
    value: "+378",
  },
  {
    label: "ğŸ‡¸ğŸ‡¹ Sao Tome and Principe (+239)",
    value: "+239",
  },
  {
    label: "ğŸ‡¸ğŸ‡¦ Saudi Arabia (+966)",
    value: "+966",
  },
  {
    label: "ğŸ‡¸ğŸ‡³ Senegal (+221)",
    value: "+221",
  },
  {
    label: "ğŸ‡·ğŸ‡¸ Serbia (+381)",
    value: "+381",
  },
  {
    label: "ğŸ‡¸ğŸ‡¨ Seychelles (+248)",
    value: "+248",
  },
  {
    label: "ğŸ‡¸ğŸ‡± Sierra Leone (+232)",
    value: "+232",
  },
  {
    label: "ğŸ‡¸ğŸ‡¬ Singapore (+65)",
    value: "+65",
  },
  {
    label: "ğŸ‡¸ğŸ‡° Slovakia (+421)",
    value: "+421",
  },
  {
    label: "ğŸ‡¸ğŸ‡® Slovenia (+386)",
    value: "+386",
  },
  {
    label: "ğŸ‡¸ğŸ‡§ Solomon Islands (+677)",
    value: "+677",
  },
  {
    label: "ğŸ‡¸ğŸ‡´ Somalia (+252)",
    value: "+252",
  },
  {
    label: "ğŸ‡¿ğŸ‡¦ South Africa (+27)",
    value: "+27",
  },
  {
    label: "ğŸ‡¸ğŸ‡¸ South Sudan (+211)",
    value: "+211",
  },
  {
    label: "ğŸ‡¬ğŸ‡¸ South Georgia / South Sandwich Islands (+500)",
    value: "+500",
  },
  {
    label: "ğŸ‡ªğŸ‡¸ Spain (+34)",
    value: "+34",
  },
  {
    label: "ğŸ‡±ğŸ‡° Sri Lanka (+94)",
    value: "+94",
  },
  {
    label: "ğŸ‡¸ğŸ‡© Sudan (+249)",
    value: "+249",
  },
  {
    label: "ğŸ‡¸ğŸ‡· Suriname (+597)",
    value: "+597",
  },
  {
    label: "ğŸ‡¸ğŸ‡¯ Svalbard and Jan Mayen (+47)",
    value: "+47",
  },
  {
    label: "ğŸ‡¸ğŸ‡¿ Swaziland (+268)",
    value: "+268",
  },
  {
    label: "ğŸ‡¸ğŸ‡ª Sweden (+46)",
    value: "+46",
  },
  {
    label: "ğŸ‡¨ğŸ‡­ Switzerland (+41)",
    value: "+41",
  },
  {
    label: "ğŸ‡¸ğŸ‡¾ Syrian Arab Republic (+963)",
    value: "+963",
  },
  {
    label: "ğŸ‡¹ğŸ‡¼ Taiwan (+886)",
    value: "+886",
  },
  {
    label: "ğŸ‡¹ğŸ‡¯ Tajikistan (+992)",
    value: "+992",
  },
  {
    label: "ğŸ‡¹ğŸ‡¿ Tanzania, United Republic of Tanzania (+255)",
    value: "+255",
  },
  {
    label: "ğŸ‡¹ğŸ‡­ Thailand (+66)",
    value: "+66",
  },
  {
    label: "ğŸ‡¹ğŸ‡± Timor-Leste (+670)",
    value: "+670",
  },
  {
    label: "ğŸ‡¹ğŸ‡¬ Togo (+228)",
    value: "+228",
  },
  {
    label: "ğŸ‡¹ğŸ‡° Tokelau (+690)",
    value: "+690",
  },
  {
    label: "ğŸ‡¹ğŸ‡´ Tonga (+676)",
    value: "+676",
  },
  {
    label: "ğŸ‡¹ğŸ‡¹ Trinidad and Tobago (+1868)",
    value: "+1868",
  },
  {
    label: "ğŸ‡¹ğŸ‡³ Tunisia (+216)",
    value: "+216",
  },
  {
    label: "ğŸ‡¹ğŸ‡· Turkey (+90)",
    value: "+90",
  },
  {
    label: "ğŸ‡¹ğŸ‡² Turkmenistan (+993)",
    value: "+993",
  },
  {
    label: "ğŸ‡¹ğŸ‡¨ Turks and Caicos Islands (+1649)",
    value: "+1649",
  },
  {
    label: "ğŸ‡¹ğŸ‡» Tuvalu (+688)",
    value: "+688",
  },
  {
    label: "ğŸ‡ºğŸ‡¬ Uganda (+256)",
    value: "+256",
  },
  {
    label: "ğŸ‡ºğŸ‡¦ Ukraine (+380)",
    value: "+380",
  },
  {
    label: "ğŸ‡¦ğŸ‡ª United Arab Emirates (+971)",
    value: "+971",
  },
  {
    label: "ğŸ‡¬ğŸ‡§ United Kingdom (+44)",
    value: "+44",
  },
  {
    label: "ğŸ‡ºğŸ‡¸ United States (+1)",
    value: "+1",
  },
  {
    label: "ğŸ‡ºğŸ‡¾ Uruguay (+598)",
    value: "+598",
  },
  {
    label: "ğŸ‡ºğŸ‡¿ Uzbekistan (+998)",
    value: "+998",
  },
  {
    label: "ğŸ‡»ğŸ‡º Vanuatu (+678)",
    value: "+678",
  },
  {
    label: "ğŸ‡»ğŸ‡ª Venezuela (+58)",
    value: "+58",
  },
  {
    label: "ğŸ‡»ğŸ‡³ Vietnam (+84)",
    value: "+84",
  },
  {
    label: "ğŸ‡»ğŸ‡¬ Virgin Islands, British (+1284)",
    value: "+1284",
  },
  {
    label: "ğŸ‡»ğŸ‡® Virgin Islands, U.S. (+1340)",
    value: "+1340",
  },
  {
    label: "ğŸ‡¼ğŸ‡« Wallis and Futuna (+681)",
    value: "+681",
  },
  {
    label: "ğŸ‡¾ğŸ‡ª Yemen (+967)",
    value: "+967",
  },
  {
    label: "ğŸ‡¿ğŸ‡² Zambia (+260)",
    value: "+260",
  },
  {
    label: "ğŸ‡¿ğŸ‡¼ Zimbabwe (+263)",
    value: "+263",
  },
];

const provincesOptions = [
  {
    label: "Agrigento",
    value: "AG",
  },
  {
    label: "Alessandria",
    value: "AL",
  },
  {
    label: "Ancona",
    value: "AN",
  },
  {
    label: "Aosta",
    value: "AO",
  },
  {
    label: "Arezzo",
    value: "AR",
  },
  {
    label: "Ascoli Piceno",
    value: "AP",
  },
  {
    label: "Asti",
    value: "AT",
  },
  {
    label: "Avellino",
    value: "AV",
  },
  {
    label: "Bari",
    value: "BA",
  },
  {
    label: "Barletta-Andria-Trani",
    value: "BT",
  },
  {
    label: "Belluno",
    value: "BL",
  },
  {
    label: "Benevento",
    value: "BN",
  },
  {
    label: "Bergamo",
    value: "BG",
  },
  {
    label: "Biella",
    value: "BI",
  },
  {
    label: "Bologna",
    value: "BO",
  },
  {
    label: "Bolzano",
    value: "BZ",
  },
  {
    label: "Brescia",
    value: "BS",
  },
  {
    label: "Brindisi",
    value: "BR",
  },
  {
    label: "Cagliari",
    value: "CA",
  },
  {
    label: "Caltanissetta",
    value: "CL",
  },
  {
    label: "Campobasso",
    value: "CB",
  },
  {
    label: "Carbonia-Iglesias",
    value: "CI",
  },
  {
    label: "Caserta",
    value: "CE",
  },
  {
    label: "Catania",
    value: "CT",
  },
  {
    label: "Catanzaro",
    value: "CZ",
  },
  {
    label: "Chieti",
    value: "CH",
  },
  {
    label: "Como",
    value: "CO",
  },
  {
    label: "Cosenza",
    value: "CS",
  },
  {
    label: "Cremona",
    value: "CR",
  },
  {
    label: "Crotone",
    value: "KR",
  },
  {
    label: "Cuneo",
    value: "CN",
  },
  {
    label: "Enna",
    value: "EN",
  },
  {
    label: "Fermo",
    value: "FM",
  },
  {
    label: "Ferrara",
    value: "FE",
  },
  {
    label: "Firenze",
    value: "FI",
  },
  {
    label: "Foggia",
    value: "FG",
  },
  {
    label: "ForlÃ¬-Cesena",
    value: "FC",
  },
  {
    label: "Frosinone",
    value: "FR",
  },
  {
    label: "Genova",
    value: "GE",
  },
  {
    label: "Gorizia",
    value: "GO",
  },
  {
    label: "Grosseto",
    value: "GR",
  },
  {
    label: "Imperia",
    value: "IM",
  },
  {
    label: "Isernia",
    value: "IS",
  },
  {
    label: "La Spezia",
    value: "SP",
  },
  {
    label: "L'Aquila",
    value: "AQ",
  },
  {
    label: "Latina",
    value: "LT",
  },
  {
    label: "Lecce",
    value: "LE",
  },
  {
    label: "Lecco",
    value: "LC",
  },
  {
    label: "Livorno",
    value: "LI",
  },
  {
    label: "Lodi",
    value: "LO",
  },
  {
    label: "Lucca",
    value: "LU",
  },
  {
    label: "Macerata",
    value: "MC",
  },
  {
    label: "Mantova",
    value: "MN",
  },
  {
    label: "Massa-Carrara",
    value: "MS",
  },
  {
    label: "Matera",
    value: "MT",
  },
];

const professionsOptions = [
  {
    label: "Medico",
    value: "Medico",
  },
  {
    label: "Infermiere",
    value: "Infermiere",
  },
  {
    label: "Chirurgo",
    value: "Chirurgo",
  },
  {
    label: "Dentista",
    value: "Dentista",
  },
  {
    label: "Farmacista",
    value: "Farmacista",
  },
  {
    label: "Ostetrica",
    value: "Ostetrica",
  },
  {
    label: "Fisioterapista",
    value: "Fisioterapista",
  },
  {
    label: "Psicologo",
    value: "Psicologo",
  },
  {
    label: "Dietista",
    value: "Dietista",
  },
  {
    label: "Radiologo",
    value: "Radiologo",
  },
  {
    label: "Biologo",
    value: "Biologo",
  },
  {
    label: "Nutrizionista",
    value: "Nutrizionista",
  },
  {
    label: "Optometrista",
    value: "Optometrista",
  },
  {
    label: "Logopedista",
    value: "Logopedista",
  },
  {
    label: "Podologo",
    value: "Podologo",
  },
  {
    label: "Terapista occupazionale",
    value: "Terapista occupazionale",
  },
  {
    label: "Ortopedico",
    value: "Ortopedico",
  },
  {
    label: "Anestesista",
    value: "Anestesista",
  },
  {
    label: "Cardiologo",
    value: "Cardiologo",
  },
  {
    label: "Neurologo",
    value: "Neurologo",
  },
];

interface ProfessionalRegisterFormData {
  firstName: string;
  lastName: string;
  birthDate: Date;
  phonePrefix: string;
  phoneNumber: string;
  professionalPaperPhoto: any;
  professionalRegistrationNumber: string;
  province: string;
  specialization: string;
  officeLocation: string;
  email: string;
  password: string;
  confirmPassword: string;
}

const schema = yup.object().shape({
  firstName: yup.string().required("Inserisci il tuo nome"),
  lastName: yup.string().required("Inserisci il tuo cognome"),
  birthDate: yup.date().required("Inserisci la tua data di nascita"),
  phonePrefix: yup.string().required("Scegli il prefisso telefonico"),
  phoneNumber: yup.string().required("Inserisci il tuo numero di telefono"),
  professionalPaperPhoto: yup.mixed().required("Inserisci la tua foto"),
  professionalRegistrationNumber: yup
    .string()
    .required("Inserisci il tuo numero di registrazione"),
  province: yup.string().required("Inserisci la tua provincia"),
  specialization: yup.string().required("Inserisci la tua specializzazione"),
  officeLocation: yup.string().required("Inserisci la tua sede"),
  email: yup
    .string()
    .email("Inserisci una mail valida")
    .required("Inserisci il tuo indirizzo email"),
  password: yup
    .string()
    .min(8, "La password deve contenere almeno 8 caratteri")
    .matches(
      /[A-Z]/,
      "La password deve contenere almeno un carattere maiuscolo",
    )
    .matches(/[0-9]/, "La password deve contenere almeno un numero")
    .matches(/[-!|]/, "La password deve contenere almeno uno tra -!|")
    .required(),
  confirmPassword: yup
    .string()
    .oneOf([yup.ref("password")], "Le password non corrispondono")
    .required(),
});

const firstStepFieldKeys = [
  "firstName",
  "lastName",
  "birthDate",
  "phonePrefix",
  "phoneNumber",
] as const;
const secondStepFieldKeys = [
  "professionalPaperPhoto",
  "professionalRegistrationNumber",
  "province",
  "specialization",
  "officeLocation",
] as const;
const thirdStepFieldKeys = ["email", "password", "confirmPassword"] as const;

export const useProfessionalRegister = () => {
  const dispatch = useDispatch();
  const navigation = useNavigation<any>();

  const stepperIndex = useSelector(
    selectors.getProfessionalRegisterStepperCounter,
  );

  const formData = useForm<ProfessionalRegisterFormData>({
    resolver: yupResolver(schema),
    defaultValues: {
      firstName: "",
      lastName: "",
      birthDate: undefined,
      phonePrefix: "",
      phoneNumber: "",
      professionalPaperPhoto: undefined,
      professionalRegistrationNumber: "",
      province: "",
      specialization: "",
      officeLocation: "",
      email: "",
      password: "",
      confirmPassword: "",
    },
  });

  const {
    control,
    handleSubmit,
    trigger,
    formState: { isDirty, isValid, isSubmitted, errors },
  } = formData;

  const [firstName, lastName, birthDate, phonePrefix, phoneNumber] = useWatch({
    control,
    name: firstStepFieldKeys,
  });

  const [
    professionalPaperPhoto,
    professionalRegistrationNumber,
    province,
    specialization,
    officeLocation,
  ] = useWatch({
    control,
    name: secondStepFieldKeys,
  });

  const [email, password, confirmPassword] = useWatch({
    control,
    name: thirdStepFieldKeys,
  });

  const step1Filled = useMemo(
    () =>
      Boolean(firstName) &&
      Boolean(lastName) &&
      Boolean(birthDate) &&
      Boolean(phonePrefix) &&
      Boolean(phoneNumber),
    [firstName, lastName, birthDate, phonePrefix, phoneNumber],
  );

  const step2Filled = useMemo(
    () =>
      Boolean(professionalPaperPhoto) &&
      Boolean(professionalRegistrationNumber) &&
      Boolean(province) &&
      Boolean(specialization) &&
      Boolean(officeLocation),
    [
      professionalPaperPhoto,
      professionalRegistrationNumber,
      province,
      specialization,
      officeLocation,
    ],
  );

  const step3Filled = useMemo(
    () => Boolean(email) && Boolean(password) && Boolean(confirmPassword),
    [email, password, confirmPassword],
  );

  const currentStepFilled = useMemo(() => {
    switch (stepperIndex) {
      case 1:
        return step1Filled;
      case 2:
        return step2Filled;
      case 3:
        return step3Filled;
      default:
        return false;
    }
  }, [stepperIndex, step1Filled, step2Filled, step3Filled]);

  const submitDisabled = useMemo(
    () =>
      !isDirty ||
      (isSubmitted && !isValid) ||
      !step1Filled ||
      !step2Filled ||
      !step3Filled,
    [isDirty, isSubmitted, isValid, step1Filled, step2Filled, step3Filled],
  );

  const canGoToNextStep = useMemo(() => {
    switch (stepperIndex) {
      case 1:
        return step1Filled;
      case 2:
        return step2Filled;
      case 3:
        return step3Filled;
      default:
        return false;
    }
  }, [stepperIndex, step1Filled, step2Filled, step3Filled]);

  const firstStepCompletionPercentage = useMemo(
    () =>
      ([firstName, lastName, birthDate, phonePrefix, phoneNumber].filter(
        Boolean,
      ).length /
        5) *
      100,
    [firstName, lastName, birthDate, phonePrefix, phoneNumber],
  );

  const secondStepCompletionPercentage = useMemo(() => {
    const fields = [
      professionalPaperPhoto,
      professionalRegistrationNumber,
      province,
      specialization,
      officeLocation,
    ];

    return (fields.filter(Boolean).length / fields.length) * 100;
  }, [
    professionalPaperPhoto,
    professionalRegistrationNumber,
    province,
    specialization,
    officeLocation,
  ]);

  const thirdStepCompletionPercentage = useMemo(() => {
    const fields = [email, password, confirmPassword];

    return (fields.filter(Boolean).length / fields.length) * 100;
  }, [email, password, confirmPassword]);

  const currentStepCompletionPercentage = useMemo(() => {
    switch (stepperIndex) {
      case 1:
        return firstStepCompletionPercentage;
      case 2:
        return secondStepCompletionPercentage;
      case 3:
        return thirdStepCompletionPercentage;
      default:
        return 0;
    }
  }, [
    stepperIndex,
    firstStepCompletionPercentage,
    secondStepCompletionPercentage,
    thirdStepCompletionPercentage,
  ]);

  const triggerProfessionalRegisterSubmit = useMemo(
    () =>
      handleSubmit((data) => {
        console.log(data);
      }),
    [dispatch, handleSubmit],
  );

  const onNextStepButtonPressed = useCallback(async () => {
    let stepValid = false;

    switch (stepperIndex) {
      case 1:
        // Trigger fields from step 1
        stepValid = await trigger(firstStepFieldKeys);
        break;
      case 2:
        // Trigger fields from step 2
        stepValid = await trigger(secondStepFieldKeys);
        break;
      case 3:
        // Trigger fields from step 3
        stepValid = await trigger(thirdStepFieldKeys);
        break;
      default:
        break;
    }

    if (stepValid) {
      dispatch(
        actions.setProfessionalRegisterStepperCounter(
          Math.min(stepperIndex + 1, 3),
        ),
      );
    }
  }, [dispatch, stepperIndex, trigger]);

  const onPreviousStepButtonPressed = useCallback(() => {
    dispatch(
      actions.setProfessionalRegisterStepperCounter(
        Math.max(stepperIndex - 1, 1),
      ),
    );
  }, [dispatch, stepperIndex]);

  useLayoutEffect(() => {
    navigation.setOptions({
      headerRight: () => (
        <HeaderStepperCounter currentStep={stepperIndex} totalSteps={3} />
      ),
    });
  }, [navigation, stepperIndex]);

  return {
    formData,
    submitDisabled,
    phonePrefixOptions,
    provincesOptions,
    professionsOptions,
    stepperIndex,
    canGoToNextStep,
    currentStepCompletionPercentage,
    currentStepFilled,
    onNextStepButtonPressed,
    onPreviousStepButtonPressed,
    triggerProfessionalRegisterSubmit,
  };
};
